---
title: "Examples"
description: "Complete end-to-end trading flows for Polymarket and Kalshi"
---

## Full Polymarket Trading Flow

```typescript
import { PredexonSDK, createEvmAdapter } from '@predexon/trade-sdk';
import { createWalletClient, http } from 'viem';
import { polygon } from 'viem/chains';
import { privateKeyToAccount } from 'viem/accounts';

// 1. Create wallet client
const account = privateKeyToAccount('0x...');
const walletClient = createWalletClient({
  account,
  chain: polygon,
  transport: http(),
});

// 2. Create SDK
const sdk = new PredexonSDK({
  apiKey: process.env.PREDEXON_API_KEY!,
  wallet: createEvmAdapter(walletClient),
});

// 3. Enable trading (first time only)
const enableResult = await sdk.enableTrading({
  core: { venue: 'polymarket', wallet: account.address },
  approvals: 'auto',
});
console.log('Trading enabled:', enableResult.tradingEnabled);

// 4. Check balance
const balances = await sdk.getBalance({
  core: { venue: 'polymarket', wallet: account.address },
});
console.log('Available USDC:', balances[0].available);

// 5. Place a market buy order
const order = await sdk.placeOrder({
  core: {
    venue: 'polymarket',
    wallet: account.address,
    side: 'buy',
    amount: '10',
    type: 'market',
  },
  flags: { tokenId: 'your-token-id' },
});
console.log('Order placed:', order.orderId, order.status);

// 6. Check positions
const positions = await sdk.getPositions({
  core: { venue: 'polymarket', wallet: account.address },
});
console.log('Positions:', positions);

// 7. Place a limit sell order
const limitOrder = await sdk.placeOrder({
  core: {
    venue: 'polymarket',
    wallet: account.address,
    side: 'sell',
    size: '5',
    price: '0.75',
    type: 'limit',
  },
  flags: { tokenId: 'your-token-id' },
});
console.log('Limit order:', limitOrder.orderId);

// 8. View open orders
const openOrders = await sdk.getOpenOrders({
  core: { venue: 'polymarket', wallet: account.address },
});
console.log('Open orders:', openOrders.length);

// 9. Cancel all orders
const cancelled = await sdk.cancelAllOrders({
  core: { venue: 'polymarket', wallet: account.address },
});
console.log('Cancelled:', cancelled.cancelled);
```

---

## Full Kalshi Trading Flow

```typescript
import { PredexonSDK } from '@predexon/trade-sdk';
import { Keypair, VersionedTransaction } from '@solana/web3.js';
import nacl from 'tweetnacl';

// 1. Create Solana keypair
const solanaKeypair = Keypair.generate();

// 2. Create SDK with Solana signer
const sdk = new PredexonSDK({
  apiKey: process.env.PREDEXON_API_KEY!,
  wallet: {
    // EVM methods (can be stubs if only using Kalshi)
    async getAddress() {
      return '0x0000000000000000000000000000000000000000';
    },
    async signTypedData() {
      throw new Error('Not needed for Kalshi');
    },
    async signTransaction() {
      throw new Error('Not needed for Kalshi');
    },

    // Solana methods
    async signSolanaTransaction(base64Tx: string): Promise<string> {
      const txBytes = Buffer.from(base64Tx, 'base64');
      const tx = VersionedTransaction.deserialize(txBytes);
      tx.sign([solanaKeypair]);
      return Buffer.from(tx.serialize()).toString('base64');
    },
    async signSolanaMessage(message: string): Promise<string> {
      const messageBytes = new TextEncoder().encode(message);
      const signature = nacl.sign.detached(messageBytes, solanaKeypair.secretKey);
      return Buffer.from(signature).toString('base64');
    },
  },
});

// 3. Enable trading
const walletAddress = solanaKeypair.publicKey.toBase58();
await sdk.enableTrading({
  core: { venue: 'kalshi', wallet: walletAddress },
});

// 4. Place market buy
const order = await sdk.placeOrder({
  core: {
    venue: 'kalshi',
    wallet: walletAddress,
    side: 'buy',
    amount: '25',
    type: 'market',
  },
  flags: {
    ticker: 'PRES-2024-DEM',
    outcome: 'Yes',
  },
});
console.log('Kalshi order:', order.orderId);

// 5. Check positions
const positions = await sdk.getPositions({
  core: { venue: 'kalshi', wallet: walletAddress },
});
console.log('Positions:', positions);
```

---

## Error Handling Example

```typescript
import {
  PredexonSDK,
  createEvmAdapter,
  ValidationError,
  AuthError,
  NetworkError,
  SigningError,
  OrderRejectedError,
  type PlaceOrderRequest,
} from '@predexon/trade-sdk';

async function placeOrderSafely(sdk: PredexonSDK, request: PlaceOrderRequest) {
  try {
    const result = await sdk.placeOrder(request);
    return { success: true, order: result };
  } catch (error) {
    if (error instanceof ValidationError) {
      // Invalid input - fix the request
      return { success: false, error: 'validation', message: error.message };
    }
    if (error instanceof AuthError) {
      // Auth issue - check API key or wallet
      return { success: false, error: 'auth', message: error.message };
    }
    if (error instanceof NetworkError) {
      // Network issue - retry later
      return { success: false, error: 'network', message: error.message };
    }
    if (error instanceof SigningError) {
      // Signing failed - user may have rejected
      return { success: false, error: 'signing', message: error.message };
    }
    if (error instanceof OrderRejectedError) {
      // Order rejected - check liquidity/balance
      return { success: false, error: 'rejected', message: error.message };
    }
    throw error; // Unknown error
  }
}

// Usage
const sdk = new PredexonSDK({
  apiKey: process.env.PREDEXON_API_KEY!,
  wallet: createEvmAdapter(walletClient),
});

const result = await placeOrderSafely(sdk, {
  core: {
    venue: 'polymarket',
    wallet: '0x...',
    side: 'buy',
    amount: '10',
    type: 'market',
  },
  flags: { tokenId: 'token-id' },
});

if (result.success) {
  console.log('Order placed:', result.order);
} else {
  console.log('Error:', result.error, result.message);
}
```

---

## Manual Approval Flow

For users who want to broadcast approval transactions themselves:

```typescript
import { PredexonSDK, createEvmAdapter } from '@predexon/trade-sdk';

const sdk = new PredexonSDK({
  apiKey: process.env.PREDEXON_API_KEY!,
  wallet: createEvmAdapter(walletClient),
});

// Request manual approvals
const result = await sdk.enableTrading({
  core: { venue: 'polymarket', wallet: address },
  approvals: 'manual',
});

if (result.approvalTransactions) {
  for (const tx of result.approvalTransactions) {
    // Broadcast each transaction using your preferred method
    console.log('Approval needed:', {
      to: tx.to,
      data: tx.data,
      chainId: tx.chainId,
    });

    // Example with viem:
    await walletClient.sendTransaction({
      to: tx.to,
      data: tx.data,
      chain: polygon,
    });
  }
}
```

---

## Prepare and Submit Flow

For advanced use cases where you want to inspect the order before submission:

```typescript
import { PredexonSDK, createEvmAdapter } from '@predexon/trade-sdk';

const sdk = new PredexonSDK({
  apiKey: process.env.PREDEXON_API_KEY!,
  wallet: createEvmAdapter(walletClient),
});

// 1. Prepare the order (builds and signs, but doesn't submit)
const prepared = await sdk.prepareOrder({
  core: {
    venue: 'polymarket',
    wallet: '0x...',
    side: 'buy',
    amount: '100',
    type: 'market',
  },
  flags: { tokenId: 'token-id' },
});

// 2. Inspect the prepared order
console.log('Order to submit:', prepared.order);
console.log('Signature:', prepared.signature);

// 3. Submit when ready
const result = await sdk.submitOrder({
  order: prepared.order,
  signature: prepared.signature,
  orderType: 'market',
});

console.log('Order submitted:', result.orderId);
```

## Next Steps

<CardGroup cols={2}>
  <Card title="Core Methods" icon="code" href="/sdk/core-methods">
    API reference for all methods
  </Card>
  <Card title="FAQ" icon="circle-question" href="/sdk/faq">
    Common questions answered
  </Card>
</CardGroup>
