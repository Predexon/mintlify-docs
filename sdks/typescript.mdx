---
title: "TypeScript SDK"
description: "TypeScript/JavaScript client library for the Predexon API"
---

## Installation

The Predexon TypeScript SDK will be available on npm soon. For now, you can use the API directly with `fetch`:

```bash
# No installation required - uses native fetch
# Or install node-fetch for Node.js < 18
npm install node-fetch
```

## Quick Start

```typescript
interface Market {
  condition_id: string;
  market_slug: string;
  title: string;
  status: "open" | "closed";
  outcomes: Array<{
    label: string;
    token_id: string;
    price: number;
  }>;
  total_volume_usd: number;
  liquidity_usd: number;
  tags: string[];
}

interface Pagination {
  limit: number;
  offset: number;
  total: number;
  has_more: boolean;
}

interface MarketsResponse {
  markets: Market[];
  pagination: Pagination;
}

class PredexonClient {
  private baseUrl: string;

  constructor(baseUrl = "https://predexon-data-service-8970529761.us-central1.run.app") {
    this.baseUrl = baseUrl;
  }

  private async get<T>(endpoint: string, params?: Record<string, any>): Promise<T> {
    const url = new URL(`${this.baseUrl}${endpoint}`);

    if (params) {
      Object.entries(params).forEach(([key, value]) => {
        if (value !== undefined && value !== null) {
          if (Array.isArray(value)) {
            value.forEach(v => url.searchParams.append(key, v));
          } else {
            url.searchParams.set(key, String(value));
          }
        }
      });
    }

    const response = await fetch(url.toString());

    if (!response.ok) {
      const error = await response.json();
      throw new Error(error.message || `HTTP ${response.status}`);
    }

    return response.json();
  }

  // Markets
  async getMarkets(options: {
    status?: "open" | "closed";
    sort?: "volume" | "open_interest" | "price_desc" | "price_asc";
    limit?: number;
    offset?: number;
    tags?: string[];
    search?: string;
  } = {}): Promise<MarketsResponse> {
    return this.get("/v1/polymarket/markets", options);
  }

  async getCandlesticks(
    conditionId: string,
    options: {
      interval?: 1 | 60 | 1440;
      startTime?: number;
      endTime?: number;
    } = {}
  ) {
    return this.get(`/v1/polymarket/candlesticks/${conditionId}`, {
      interval: options.interval,
      start_time: options.startTime,
      end_time: options.endTime,
    });
  }

  async getMarketPrice(tokenId: string, atTime?: number) {
    return this.get(`/v1/polymarket/market-price/${tokenId}`, {
      at_time: atTime,
    });
  }

  // Wallet
  async getPositions(
    walletAddress: string,
    options: {
      sortBy?: "value" | "unrealized_pnl" | "realized_pnl" | "cost";
      order?: "asc" | "desc";
      limit?: number;
      includeClosed?: boolean;
    } = {}
  ) {
    return this.get(`/v1/polymarket/wallet/positions/${walletAddress}`, {
      sort_by: options.sortBy,
      order: options.order,
      limit: options.limit,
      include_closed: options.includeClosed,
    });
  }

  async getPnL(
    walletAddress: string,
    granularity: "day" | "week" | "month" | "year" | "all",
    options: {
      startTime?: number;
      endTime?: number;
    } = {}
  ) {
    return this.get(`/v1/polymarket/wallet/pnl/${walletAddress}`, {
      granularity,
      start_time: options.startTime,
      end_time: options.endTime,
    });
  }

  // Matching
  async findMatches(options: {
    polymarketSlug?: string;
    kalshiTicker?: string;
  }) {
    return this.get("/v1/matching-markets", {
      polymarket_market_slug: options.polymarketSlug,
      kalshi_market_ticker: options.kalshiTicker,
    });
  }
}

export { PredexonClient };
```

## Usage Examples

### Get Top Markets

```typescript
const client = new PredexonClient();

// Get top 10 open markets by volume
const { markets } = await client.getMarkets({
  status: "open",
  sort: "volume",
  limit: 10,
});

markets.forEach(market => {
  const yesPrice = market.outcomes[0].price;
  console.log(`${market.title}`);
  console.log(`  Yes: ${(yesPrice * 100).toFixed(0)}%, Volume: $${market.total_volume_usd.toLocaleString()}`);
});
```

### Track a Wallet

```typescript
const wallet = "0x1234567890abcdef...";

// Get positions
const positions = await client.getPositions(wallet, {
  sortBy: "unrealized_pnl",
  order: "desc",
});

console.log(`Total Value: $${positions.summary.total_value_usd.toLocaleString()}`);
console.log(`Unrealized P&L: $${positions.summary.total_unrealized_pnl_usd.toLocaleString()}`);

// Get P&L history
const pnl = await client.getPnL(wallet, "week");

pnl.pnl_over_time.forEach(point => {
  const date = new Date(point.timestamp * 1000).toLocaleDateString();
  console.log(`${date}: $${point.pnl_to_date.toFixed(2)}`);
});
```

### React Hook Example

```typescript
import { useState, useEffect } from "react";

function useMarkets(status: "open" | "closed" = "open") {
  const [markets, setMarkets] = useState<Market[]>([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<Error | null>(null);

  useEffect(() => {
    const client = new PredexonClient();

    client
      .getMarkets({ status, limit: 50 })
      .then(data => {
        setMarkets(data.markets);
        setLoading(false);
      })
      .catch(err => {
        setError(err);
        setLoading(false);
      });
  }, [status]);

  return { markets, loading, error };
}

// Usage
function MarketsList() {
  const { markets, loading, error } = useMarkets("open");

  if (loading) return <div>Loading...</div>;
  if (error) return <div>Error: {error.message}</div>;

  return (
    <ul>
      {markets.map(market => (
        <li key={market.condition_id}>{market.title}</li>
      ))}
    </ul>
  );
}
```

## Error Handling

```typescript
try {
  const data = await client.getMarkets({ status: "invalid" as any });
} catch (error) {
  if (error instanceof Error) {
    console.error("API Error:", error.message);
  }
}

// With response details
async function fetchWithErrorHandling() {
  const response = await fetch(
    "https://predexon-data-service-8970529761.us-central1.run.app/v1/polymarket/markets"
  );

  if (!response.ok) {
    const errorData = await response.json();
    throw new Error(`${errorData.error}: ${errorData.message}`);
  }

  return response.json();
}
```

## Browser Usage

Works directly in the browser with no build step:

```html
<script type="module">
  const BASE_URL = "https://predexon-data-service-8970529761.us-central1.run.app";

  const response = await fetch(`${BASE_URL}/v1/polymarket/markets?status=open&limit=5`);
  const { markets } = await response.json();

  markets.forEach(m => {
    console.log(m.title, m.outcomes[0].price);
  });
</script>
```

## Coming Soon

A full-featured TypeScript SDK with:
- Complete type definitions
- Automatic pagination helpers
- Rate limiting and retries
- React Query integration
- WebSocket support for real-time data

<Card title="Join the Waitlist" icon="envelope" href="https://predexon.com/waitlist">
  Be notified when the SDK is released
</Card>
